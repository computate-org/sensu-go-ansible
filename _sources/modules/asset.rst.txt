:github_url: https://github.com/sensu/sensu-go-ansible/blob/master/plugins/modules/asset.py

.. _sensu.sensu_go.asset_module:

asset -- Manage Sensu assets
============================

Create, update or delete Sensu Go asset.

For more information, refer to the Sensu documentation at https://docs.sensu.io/sensu-go/latest/reference/assets/.


.. versionadded:: 1.0.0

Requirements
------------

The below requirements are needed on the host that executes this module:

- python >= 2.7


Examples
--------

.. code-block:: yaml+jinja

   - name: Create a multiple-build asset
     sensu.sensu_go.asset:
       name: sensu-plugins-cpu-checks
       builds:
         - url: https://assets.bonsai.sensu.io/68546e739d96fd695655b77b35b5aabfbabeb056/sensu-plugins-cpu-checks_4.0.0_centos_linux_amd64.tar.gz
           sha512: 518e7c17cf670393045bff4af318e1d35955bfde166e9ceec2b469109252f79043ed133241c4dc96501b6636a1ec5e008ea9ce055d1609865635d4f004d7187b
           filters:
             - entity.system.os == 'linux'
             - entity.system.arch == 'amd64'
             - entity.system.platform == 'rhel'
         - url: https://assets.bonsai.sensu.io/68546e739d96fd695655b77b35b5aabfbabeb056/sensu-plugins-cpu-checks_4.0.0_alpine_linux_amd64.tar.gz
           sha512: b2da25ecd7642e6de41fde37d674fe19dcb6ee3d680e145e32289f7cfc352e6b5f9413ee9b701d61faeaa47b399aa30b25885dbc1ca432c4061c8823774c28f3
           filters:
             - entity.system.os == 'linux'
             - entity.system.arch == 'amd64'
             - entity.system.platform == 'alpine'

   - name: Delete an asset
     sensu.sensu_go.asset:
       name: sensu-plugins-cpu-check
       state: absent




See Also
--------

.. seealso::

   - :ref:`sensu.sensu_go.asset_info_module`
   - :ref:`sensu.sensu_go.bonsai_asset_module`



Parameters
----------

annotations (optional)
  Custom metadata fields with fewer restrictions, as key/value pairs.

  These are preserved by Sensu but not accessible as tokens or identifiers, and are mainly intended for use with external tools.

  | **type**: dict

auth (optional)
  Authentication parameters. Can define each of them with ENV as well.

  | **type**: dict

  api_key (optional)
    The API key that should be used when authenticating. If this is not set, the value of the SENSU_API_KEY environment variable will be checked.

    This replaces *auth.user* and *auth.password* parameters.

    For more information about the API key, refer to the official Sensu documentation at https://docs.sensu.io/sensu-go/latest/guides/use-apikey-feature/.

    | **type**: str

  ca_path (optional)
    Path to the CA bundle that should be used to validate the backend certificate.

    If this parameter is not set, module will use the CA bundle that python is using.

    It is also possible to set this parameter via the *SENSU_CA_PATH* environment variable.

    | **type**: path

  password (optional)
    The Sensu user's password. If this is not set the value of the SENSU_PASSWORD environment variable will be checked.

    This parameter is ignored if the *auth.api_key* parameter is set.

    | **type**: str
    | **default**: P@ssw0rd!

  url (optional)
    Location of the Sensu backend API. If this is not set the value of the SENSU_URL environment variable will be checked.

    | **type**: str
    | **default**: http://localhost:8080

  user (optional)
    The username to use for connecting to the Sensu API. If this is not set the value of the SENSU_USER environment variable will be checked.

    This parameter is ignored if the *auth.api_key* parameter is set.

    | **type**: str
    | **default**: admin

  verify (optional)
    Flag that controls the certificate validation.

    If you are using self-signed certificates, you can set this parameter to ``false``.

    ONLY USE THIS PARAMETER IN DEVELOPMENT SCENARIOS! In you use self-signed certificates in production, see the *auth.ca_path* parameter.

    It is also possible to set this parameter via the *SENSU_VERIFY* environment variable.

    | **type**: bool
    | **default**: True


builds (optional)
  A list of asset builds used to define multiple artefacts which provide the named asset.

  Required if *state* is ``present``.

  | **type**: list

  filters (optional)
    A set of Sensu query expressions used to determine if the asset should be installed.

    | **type**: list

  headers (optional)
    Additional headers to send when retrieving the asset, e.g. for authorization.

    | **type**: dict

  sha512 (required)
    The checksum of the asset.

    | **type**: str

  url (required)
    The URL location of the asset.

    | **type**: str


labels (optional)
  Custom metadata fields that can be accessed within Sensu, as key/value pairs.

  | **type**: dict

name (required)
  The Sensu resource's name. This name (in combination with the namespace where applicable) uniquely identifies the resource that Ansible operates on.

  If the resource with selected name already exists, Ansible module will update it to match the specification in the task.

  Consult the *name* metadata attribute specification in the upstream docs on https://docs.sensu.io/sensu-go/latest/reference/ for more details about valid names and other restrictions.

  | **type**: str

namespace (optional)
  RBAC namespace to operate in. If this is not set the value of the SENSU_NAMESPACE environment variable will be used.

  | **type**: str
  | **default**: default

state (optional)
  Target state of the Sensu object.

  | **type**: str
  | **default**: present
  | **choices**: present, absent



Return Values
-------------

object
   Object representing Sensu asset.

   **sample**:

   .. code-block:: yaml

      builds:
      - sha512: 4f926bf4328f...2c58ad9ab40c9e2edc31b288d066b195b21b
        url: http://example.com/asset.tar.gz
      metadata:
        name: check_script
        namespace: default

