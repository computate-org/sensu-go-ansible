:github_url: https://github.com/sensu/sensu-go-ansible/blob/master/plugins/modules/entity.py

.. _entity_module:

entity -- Manage Sensu entities
===============================

Create, update or delete Sensu entity.

For more information, refer to the Sensu documentation at https://docs.sensu.io/sensu-go/latest/reference/entities/.


Examples
--------

.. code-block:: yaml+jinja

   
   - name: Create an entity
     entity:
       auth:
         url: http://localhost:8080
       name: entity
       entity_class: proxy
       subscriptions:
         - web
         - prod
       system:
         hostname: playbook-entity
         os: linux
         platform: ubutntu
         network:
           interfaces:
             - name: lo
               addresses:
                 - 127.0.0.1/8
                 - ::1/128
             - name: eth0
               mac: 52:54:00:20:1b:3c
               addresses:
                 - 93.184.216.34/24
       last_seen: 1522798317
       deregister: yes
       deregistration_handler: email-handler
       redact:
         - password
         - pass
         - api_key
       user: agent

   - name: Delete an entity
     entity:
       name: entity
       state: absent





See Also
--------

.. seealso::

   - :ref:`entity_info_module`



Parameters
----------

annotations (optional)
  Custom metadata fields with fewer restrictions, as key/value pairs.

  These are preserved by Sensu but not accessible as tokens or identifiers, and are mainly intended for use with external tools.

  | **type**: dict

auth (optional)
  Authentication parameters. Can define each of them with ENV as well.

  | **type**: dict

  api_key (optional)
    The API key that should be used when authenticating. If this is not set, the value of the SENSU_API_KEY environment variable will be checked.

    This replaces *auth.user* and *auth.password* parameters.

    For more information about the API key, refer to the official Sensu documentation at https://docs.sensu.io/sensu-go/latest/guides/use-apikey-feature/.

    | **type**: str

  password (optional)
    The Sensu user's password. If this is not set the value of the SENSU_PASSWORD environment variable will be checked.

    This parameter is ignored if the *auth.api_key* parameter is set.

    | **type**: str
    | **default**: P@ssw0rd!

  url (optional)
    Location of the Sensu backend API. If this is not set the value of the SENSU_URL environment variable will be checked.

    | **type**: str
    | **default**: http://localhost:8080

  user (optional)
    The username to use for connecting to the Sensu API. If this is not set the value of the SENSU_USER environment variable will be checked.

    This parameter is ignored if the *auth.api_key* parameter is set.

    | **type**: str
    | **default**: admin


deregister (optional)
  If the entity should be removed when it stops sending keepalive messages.

  | **type**: bool

deregistration_handler (optional)
  The name of the handler to be called when an entity is deregistered.

  | **type**: str

entity_class (optional)
  Entity class. Standard classes are ``proxy`` and ``agent``, but you can use whatever you want.

  Required if *state* is ``present``.

  | **type**: str

labels (optional)
  Custom metadata fields that can be accessed within Sensu, as key/value pairs.

  | **type**: dict

last_seen (optional)
  Timestamp the entity was last seen, in seconds since the Unix epoch.

  | **type**: int

name (required)
  The Sensu object's name.

  | **type**: str

namespace (optional)
  RBAC namespace to operate in. If this is not set the value of the SENSU_NAMESPACE environment variable will be used.

  | **type**: str
  | **default**: default

redact (optional)
  List of items to redact from log messages. If a value is provided, it overwrites the default list of items to be redacted.

  | **type**: list

state (optional)
  Target state of the Sensu object.

  | **type**: str
  | **default**: present
  | **choices**: present, absent

subscriptions (optional)
  List of subscriptions for the entity.

  | **type**: list

system (optional)
  System information about the entity, such as operating system and platform. See https://docs.sensu.io/sensu-go/5.13/reference/entities/#system-attributes for more information.

  | **type**: dict

user (optional)
  Sensu RBAC username used by the entity. Agent entities require get, list, create, update, and delete permissions for events across all namespaces.

  | **type**: str





Return Values
-------------

object (success), dict, )
  object representing Sensu entity


